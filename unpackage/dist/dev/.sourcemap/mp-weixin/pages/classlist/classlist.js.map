{"version":3,"file":"classlist.js","sources":["pages/classlist/classlist.vue","../../EdgeDownload/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY2xhc3NsaXN0L2NsYXNzbGlzdC52dWU"],"sourcesContent":["<template>\n  <view class=\"classlist\">\n    <view class=\"loadingLayout\" v-if=\"!classList.length && !noData\">\n      <uni-load-more status=\"loading\"></uni-load-more>\n    </view>\n\n    <view class=\"content\">\n      <navigator\n        :url=\"'/pages/preview/preview?id=' + item._id\"\n        class=\"item\"\n        v-for=\"item in classList\"\n        :key=\"item._id\"\n      >\n        <image :src=\"item.smallPicurl\" mode=\"aspectFill\" />\n      </navigator>\n    </view>\n\n    <view class=\"loadingLayout\" v-if=\"noData || classList.length\">\n      <uni-load-more :status=\"noData ? 'noMore' : 'loading'\"></uni-load-more>\n    </view>\n\n    <view class=\"safe-area-inset-bottom\"></view>\n  </view>\n</template>\n\n<script setup>\nimport { ref } from \"vue\";\nimport {\n  onLoad,\n  onUnload,\n  onReachBottom,\n  onShareAppMessage,\n  onShareTimeline,\n} from \"@dcloudio/uni-app\";\nimport { apiGetClassList } from \"@/api/apis.js\";\nimport { goToHome } from \"@/utils/common.js\";\n// 分类列表数据\nconst classList = ref([]);\n\nconst noData = ref(false); // 是否有数据\n\n// 查询参数\nconst queryParms = {\n  pageNum: 1,\n  pageSize: 12,\n};\nlet pageName;\n\nonLoad((e) => {\n  if (!id) goToHome();\n  // 页面加载时获取分类列表\n  console.log(\"e\", e);\n  let { id = null, name = null } = e;\n  queryParms.classid = id;\n  pageName = name;\n\n  uni.setNavigationBarTitle({ title: name });\n  getClassList(queryParms);\n});\n\n// 页面触底加载更多\nonReachBottom(() => {\n  if (noData.value) {\n    return;\n  }\n  console.log(\"触底加载更多\");\n  queryParms.pageNum++;\n  getClassList(queryParms);\n});\n\n// 获取分类列表\nconst getClassList = async (value = {}) => {\n  let res = await apiGetClassList(value);\n  classList.value = [...classList.value, ...res.data];\n  if (res.data.length < queryParms.pageSize) {\n    noData.value = true; // 没有更多数据\n  } else {\n    noData.value = false; // 还有数据\n  }\n  uni.setStorageSync(\"storgeClassList\", classList.value);\n};\n\n// 分享给好友\nonShareAppMessage((e) => {\n  console.log(e);\n  return {\n    title: \"别笑，你也过不了第二关\",\n    path:\n      \"/pages/classlist/classlist?id=\" +\n      queryParms.classid +\n      \"&name=\" +\n      pageName,\n  };\n});\n\n// 分享到朋友圈\nonShareTimeline(() => {\n  return {\n    title: \"别笑，你也过不了第二关\",\n    query: \"id=\" + queryParms.classid + \"&name=\" + pageName,\n  };\n});\n\nonUnload(() => {\n  uni.removeStorageSync(\"storgeClassList\");\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.classlist {\n  .content {\n    padding: 30rpx;\n    display: grid;\n    grid-template-columns: repeat(3, 1fr);\n    gap: 5rpx;\n\n    .item {\n      position: relative;\n      width: 100%;\n      height: 440rpx;\n      overflow: hidden;\n      border-radius: 10rpx;\n\n      image {\n        width: 100%;\n        height: 100%;\n        display: block;\n        border-radius: 10rpx;\n      }\n    }\n  }\n}\n</style>\n0\n","import MiniProgramPage from 'D:/extest/wallpaper-engine/pages/classlist/classlist.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","onLoad","goToHome","uni","onReachBottom","apiGetClassList","onShareAppMessage","onShareTimeline","onUnload"],"mappings":";;;;;;;;;;;;;;;AAqCA,UAAA,YAAAA,cAAAA,IAAA,CAAA,CAAA;AAEA,UAAA,SAAAA,cAAAA,IAAA,KAAA;AAGA,UAAA,aAAA;AAAA,MACA,SAAA;AAAA,MACA,UAAA;AAAA,IACA;AACA,QAAA;AAEAC,kBAAA,OAAA,CAAA,MAAA;AACA,UAAA,CAAA;AAAAC,qBAAAA;AAEAC,oBAAA,MAAA,MAAA,OAAA,uCAAA,KAAA,CAAA;AACA,UAAA,EAAA,KAAA,MAAA,OAAA,KAAA,IAAA;AACA,iBAAA,UAAA;AACA,iBAAA;AAEAA,oBAAAA,MAAA,sBAAA,EAAA,OAAA,KAAA,CAAA;AACA,mBAAA,UAAA;AAAA,IACA,CAAA;AAGAC,kBAAAA,cAAA,MAAA;AACA,UAAA,OAAA,OAAA;AACA;AAAA,MACA;AACAD,oBAAAA,MAAA,MAAA,OAAA,uCAAA,QAAA;AACA,iBAAA;AACA,mBAAA,UAAA;AAAA,IACA,CAAA;AAGA,UAAA,eAAA,OAAA,QAAA,OAAA;AACA,UAAA,MAAA,MAAAE,yBAAA,KAAA;AACA,gBAAA,QAAA,CAAA,GAAA,UAAA,OAAA,GAAA,IAAA,IAAA;AACA,UAAA,IAAA,KAAA,SAAA,WAAA,UAAA;AACA,eAAA,QAAA;AAAA,MACA,OAAA;AACA,eAAA,QAAA;AAAA,MACA;AACAF,oBAAAA,MAAA,eAAA,mBAAA,UAAA,KAAA;AAAA,IACA;AAGAG,kBAAA,kBAAA,CAAA,MAAA;AACAH,oBAAAA,MAAA,MAAA,OAAA,uCAAA,CAAA;AACA,aAAA;AAAA,QACA,OAAA;AAAA,QACA,MACA,mCACA,WAAA,UACA,WACA;AAAA,MACA;AAAA,IACA,CAAA;AAGAI,kBAAAA,gBAAA,MAAA;AACA,aAAA;AAAA,QACA,OAAA;AAAA,QACA,OAAA,QAAA,WAAA,UAAA,WAAA;AAAA,MACA;AAAA,IACA,CAAA;AAEAC,kBAAAA,SAAA,MAAA;AACAL,0BAAA,kBAAA,iBAAA;AAAA,IACA,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxGA,GAAG,WAAW,eAAe;"}