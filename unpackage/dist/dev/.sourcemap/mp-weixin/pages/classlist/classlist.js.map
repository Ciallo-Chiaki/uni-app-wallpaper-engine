{"version":3,"file":"classlist.js","sources":["pages/classlist/classlist.vue","../../EdgeDownload/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY2xhc3NsaXN0L2NsYXNzbGlzdC52dWU"],"sourcesContent":["<template>\n  <view class=\"classlist\">\n    <view class=\"loadingLayout\" v-if=\"!classList.length && !noData\">\n      <uni-load-more status=\"loading\"></uni-load-more>\n    </view>\n\n    <view class=\"content\">\n      <navigator\n        :url=\"'/pages/preview/preview?id=' + item._id\"\n        class=\"item\"\n        v-for=\"item in classList\"\n        :key=\"item._id\"\n      >\n        <image :src=\"item.smallPicurl\" mode=\"aspectFill\" />\n      </navigator>\n    </view>\n\n    <view class=\"loadingLayout\" v-if=\"noData || classList.length\">\n      <uni-load-more :status=\"noData ? 'noMore' : 'loading'\"></uni-load-more>\n    </view>\n\n    <view class=\"safe-area-inset-bottom\"></view>\n  </view>\n</template>\n\n<script setup>\nimport { ref } from \"vue\";\nimport { onLoad, onReachBottom } from \"@dcloudio/uni-app\";\nimport { apiGetClassList } from \"@/api/apis.js\";\n// 分类列表数据\nconst classList = ref([]);\n\nconst noData = ref(false); // 是否有数据\n\n// 查询参数\nconst queryParms = {\n  pageNum: 1,\n  pageSize: 12,\n};\n\nonLoad((e) => {\n  // 页面加载时获取分类列表\n  console.log(\"e\", e);\n  let { id = null, name = null } = e;\n  queryParms.classid = id;\n  uni.setNavigationBarTitle({ title: name });\n  getClassList(queryParms);\n});\n\n// 页面触底加载更多\nonReachBottom(() => {\n  if (noData.value) {\n    return;\n  }\n  console.log(\"触底加载更多\");\n  queryParms.pageNum++;\n  getClassList(queryParms);\n});\n\n// 获取分类列表\nconst getClassList = async (value = {}) => {\n  let res = await apiGetClassList(value);\n  classList.value = [...classList.value, ...res.data];\n  if (res.data.length < queryParms.pageSize) {\n    noData.value = true; // 没有更多数据\n  } else {\n    noData.value = false; // 还有数据\n  }\n  uni.setStorageSync(\"storgeClassList\", classList.value);\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.classlist {\n  .content {\n    padding: 30rpx;\n    display: grid;\n    grid-template-columns: repeat(3, 1fr);\n    gap: 5rpx;\n\n    .item {\n      position: relative;\n      width: 100%;\n      height: 440rpx;\n      overflow: hidden;\n      border-radius: 10rpx;\n\n      image {\n        width: 100%;\n        height: 100%;\n        display: block;\n        border-radius: 10rpx;\n      }\n    }\n  }\n}\n</style>\n0\n","import MiniProgramPage from 'D:/extest/wallpaper-engine/pages/classlist/classlist.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","onLoad","uni","onReachBottom","apiGetClassList"],"mappings":";;;;;;;;;;;;;;AA8BA,UAAM,YAAYA,cAAAA,IAAI,CAAA,CAAE;AAExB,UAAM,SAASA,cAAAA,IAAI,KAAK;AAGxB,UAAM,aAAa;AAAA,MACjB,SAAS;AAAA,MACT,UAAU;AAAA,IACZ;AAEAC,kBAAM,OAAC,CAAC,MAAM;AAEZC,8EAAY,KAAK,CAAC;AAClB,UAAI,EAAE,KAAK,MAAM,OAAO,KAAI,IAAK;AACjC,iBAAW,UAAU;AACrBA,oBAAAA,MAAI,sBAAsB,EAAE,OAAO,KAAM,CAAA;AACzC,mBAAa,UAAU;AAAA,IACzB,CAAC;AAGDC,kBAAAA,cAAc,MAAM;AAClB,UAAI,OAAO,OAAO;AAChB;AAAA,MACD;AACDD,oBAAAA,MAAY,MAAA,OAAA,uCAAA,QAAQ;AACpB,iBAAW;AACX,mBAAa,UAAU;AAAA,IACzB,CAAC;AAGD,UAAM,eAAe,OAAO,QAAQ,OAAO;AACzC,UAAI,MAAM,MAAME,yBAAgB,KAAK;AACrC,gBAAU,QAAQ,CAAC,GAAG,UAAU,OAAO,GAAG,IAAI,IAAI;AAClD,UAAI,IAAI,KAAK,SAAS,WAAW,UAAU;AACzC,eAAO,QAAQ;AAAA,MACnB,OAAS;AACL,eAAO,QAAQ;AAAA,MAChB;AACDF,oBAAAA,MAAI,eAAe,mBAAmB,UAAU,KAAK;AAAA,IACvD;;;;;;;;;;;;;;;;;;;;;;;;;;ACpEA,GAAG,WAAW,eAAe;"}