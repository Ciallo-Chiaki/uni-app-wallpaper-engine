{"version":3,"file":"preview.js","sources":["pages/preview/preview.vue","../../EdgeDownload/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcHJldmlldy9wcmV2aWV3LnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"preview\">\n    <swiper circular>\n      <swiper-item v-for=\"item in classList\" :key=\"item._id\">\n        <image @click=\"maskChange\" :src=\"item.picurl\" mode=\"aspectFill\" />\n      </swiper-item>\n    </swiper>\n\n    <view class=\"mask\" v-if=\"maskState\">\n      <view\n        class=\"goBack\"\n        @click=\"goBack\"\n        :style=\"{ top: getStatusBarHeight() + 'px' }\"\n      >\n        <uni-icons\n          type=\"back\"\n          color=\"#fff\"\n          size=\"30\"\n          @click=\"maskChange\"\n        ></uni-icons>\n      </view>\n      <view class=\"count\">{{ currentIndex + 1 }} / {{ classList.length }}</view>\n      <view class=\"time\">\n        <uni-dateformat :date=\"Date.now()\" format=\"hh:mm\" />\n      </view>\n      <view class=\"date\">\n        <uni-dateformat :date=\"Date.now()\" format=\"MM月dd日\" />\n      </view>\n      <view class=\"footer\">\n        <view class=\"box\" @click=\"clickInfo\">\n          <uni-icons type=\"info\" color=\"#000\" size=\"24\" />\n          <view class=\"text\">信息</view>\n        </view>\n        <view class=\"box\" @click=\"clickScore\">\n          <uni-icons type=\"star\" color=\"#000\" size=\"24\" />\n          <view class=\"text\">5分</view>\n        </view>\n        <view class=\"box\">\n          <uni-icons type=\"download\" color=\"#000\" size=\"24\" />\n          <view class=\"text\">下载</view>\n        </view>\n      </view>\n    </view>\n\n    <uni-popup ref=\"infoPopup\" type=\"bottom\">\n      <view class=\"infoPopup\">\n        <view class=\"popHeader\">\n          <view></view>\n          <view class=\"title\">壁纸信息</view>\n          <view class=\"close\" @click=\"clickInfoClose\">\n            <uni-icons type=\"closeempty\" color=\"#999\" size=\"18\" />\n          </view>\n        </view>\n        <scroll-view scroll-y>\n          <view class=\"content\">\n            <view class=\"row\">\n              <view class=\"label\">壁纸ID：</view>\n              <text selectable class=\"value\">123123123123</text>\n            </view>\n\n            <view class=\"row\">\n              <view class=\"label\">分类：</view>\n              <text class=\"value class\">明星美女</text>\n            </view>\n\n            <view class=\"row\">\n              <view class=\"label\">发布者：</view>\n              <text class=\"value\">若叶睦</text>\n            </view>\n\n            <view class=\"row\">\n              <view class=\"label\">评分：</view>\n              <view class=\"value roteBox\">\n                <uni-rate readonly touchable value=\"3.7\" size=\"16\" />\n                <text class=\"score\">5分</text>\n              </view>\n            </view>\n\n            <view class=\"row\">\n              <view class=\"label\">摘要：</view>\n              <text selectable class=\"value\"\n                >Lorem ipsum dolor sit amet consectetur adipisicing elit.\n                Laboriosam, ipsum perspiciatis.\n              </text>\n            </view>\n\n            <view class=\"row\">\n              <view class=\"label\">标签：</view>\n              <view class=\"value tabs\">\n                <view class=\"tab\" v-for=\"item in 3\">标签名</view>\n              </view>\n            </view>\n\n            <view class=\"copyright\">\n              版权信息 Lorem ipsum dolor sit amet consectetur adipisicing elit.\n              Sit ab dolorum, aliquid eos repudiandae laboriosam totam eligendi!\n              Aut autem aperiam error harum quo cumque iure accusamus? Nisi et\n              illo eum.\n            </view>\n          </view>\n        </scroll-view>\n      </view>\n    </uni-popup>\n\n    <uni-popup ref=\"scorePopup\" :is-mask-click=\"false\" type=\"center\">\n      <view class=\"scorePopup\">\n        <view class=\"popHeader\">\n          <view></view>\n          <view class=\"title\">壁纸评分</view>\n          <view class=\"close\" @click=\"clickScoreClose\">\n            <uni-icons type=\"closeempty\" color=\"#999\" size=\"18\" />\n          </view>\n        </view>\n\n        <view class=\"content\">\n          <uni-rate v-model=\"userScore\" allowHalf />\n          <text class=\"scoreText\">{{ userScore }}分</text>\n        </view>\n\n        <view class=\"footer\">\n          <button\n            @click=\"submitScore\"\n            :disabled=\"!userScore\"\n            type=\"default\"\n            size=\"mini\"\n            plain\n          >\n            确认评分\n          </button>\n        </view>\n      </view>\n    </uni-popup>\n  </view>\n</template>\n\n<script setup>\nimport { ref } from \"vue\";\nimport { getStatusBarHeight } from \"@/utils/system\";\nimport { onLoad } from \"@dcloudio/uni-app\";\n\nconst maskState = ref(true);\nconst infoPopup = ref(null);\nconst scorePopup = ref(null);\nconst userScore = ref(0);\nconst classList = ref([]);\nconst currentId = ref(null);\nconst currentIndex = ref(0);\n\nconst strorgClassList = uni.getStorageSync(\"storgeClassList\") || [];\nclassList.value = strorgClassList.map((item) => {\n  return {\n    ...item,\n    picurl: item.smallPicurl.replace(\"_small.webp\", \".jpg\"),\n  };\n});\nconsole.log(\"获取缓存的分类列表\", strorgClassList);\nconsole.log(\"处理后的分类列表\", classList.value);\n\nonLoad((e) => {\n  // 页面加载时获取分类列表\n  // console.log(\"e\", e.id);\n  currentId.value = e.id || null;\n  currentIndex.value = classList.value.findIndex((item) => {\n    return item._id === currentId.value;\n  });\n});\n\n// 点击info弹窗\nconst clickInfo = () => {\n  infoPopup.value.open();\n};\n\n// 点击关闭信息弹窗\nconst clickInfoClose = () => {\n  infoPopup.value.close();\n};\n\n// 点击评分弹窗\nconst clickScore = () => {\n  scorePopup.value.open();\n};\n// 点击关闭评分弹窗\nconst clickScoreClose = () => {\n  scorePopup.value.close();\n};\n\n// 提交评分\nconst submitScore = () => {\n  console.log(`用户评分: ${userScore.value}`);\n};\n\n// 遮罩层状态\nconst maskChange = () => {\n  maskState.value = !maskState.value;\n};\n\n// 返回上一页\nconst goBack = () => {\n  uni.navigateBack();\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.preview {\n  width: 100%;\n  height: 100vh;\n  position: relative;\n  swiper {\n    width: 100%;\n    height: 100%;\n\n    image {\n      width: 100%;\n      height: 100%;\n      border-radius: 10rpx;\n    }\n  }\n  .mask {\n    & > view {\n      position: absolute;\n      left: 0;\n      right: 0;\n      margin: auto;\n      width: fit-content;\n      color: #fff;\n    }\n    .goBack {\n      width: 76rpx;\n      height: 76rpx;\n      background: rgba(0, 0, 0, 0.5);\n      border-radius: 76rpx;\n      margin-left: 0;\n      top: 0;\n      left: 30rpx;\n      backdrop-filter: blur(10rpx);\n      // border: 1px solid red;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n    }\n    .count {\n      top: 10vh;\n      background: rgba(0, 0, 0, 0.3);\n      font-size: 28rpx;\n      border-radius: 40rpx;\n      padding: 8rpx 28rpx;\n      backdrop-filter: blur(10rpx);\n    }\n    .time {\n      font-size: 140rpx;\n      top: calc(10vh + 80rpx);\n      font-weight: 100;\n      line-height: 1em;\n      text-shadow: 0 4rpx rgba(0, 0, 0, 0.3);\n    }\n    .date {\n      font-size: 34rpx;\n      top: calc(10vh + 230rpx);\n      text-shadow: 0 2rpx rgba(0, 0, 0, 0.3);\n    }\n    .footer {\n      background: rgba(255, 255, 255, 0.8);\n      bottom: 10vh;\n      width: 65vw;\n      height: 120rpx;\n      border-radius: 120rpx;\n      color: #000;\n      display: flex;\n      justify-content: space-around;\n      align-items: center;\n      box-shadow: 0 2rpx 0 rgba(0, 0, 0, 0.1);\n      backdrop-filter: blur(20rpx);\n      .box {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n        padding: 2rpx 12rpx;\n        .text {\n          font-size: 26rpx;\n          color: $text-font-color-2;\n        }\n      }\n    }\n  }\n\n  .infoPopup {\n    background: #fff;\n    padding: 30rpx;\n    border-radius: 30rpx 30rpx 0 0;\n    overflow: hidden;\n    .popHeader {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      padding: 20rpx 0;\n      .title {\n        font-size: 26rpx;\n        color: $text-font-color-2;\n      }\n      .close {\n        padding: 10rpx;\n      }\n    }\n    scroll-view {\n      max-height: 60vh;\n      .content {\n        padding: 20rpx;\n        .row {\n          display: flex;\n          padding: 16rpx 0;\n          border-bottom: 1px solid #eee;\n          font-size: 32rpx;\n          line-height: 1.7rem;\n          color: #666;\n          .label {\n            color: $text-font-color-3;\n            width: 140rpx;\n            text-align: right;\n            font-size: 30rpx;\n          }\n          .value {\n            flex: 1;\n            width: 0;\n            margin-left: 20rpx;\n            color: $text-font-color-1;\n          }\n          .roteBox {\n            display: flex;\n            align-items: center;\n            .score {\n              font-size: 26rpx;\n              color: $text-font-color-2;\n              padding-left: 10rpx;\n            }\n          }\n          .tabs {\n            display: flex;\n            flex-wrap: wrap;\n            .tab {\n              border: 1px solid $brand-theme-color;\n              color: $brand-theme-color;\n              font-size: 22rpx;\n              padding: 10rpx 30rpx;\n              border-radius: 40rpx;\n              line-height: 1rem;\n              margin: 0 10rpx 10rpx 0;\n            }\n          }\n          .class {\n            color: $brand-theme-color;\n          }\n        }\n        .copyright {\n          margin: 20rpx 0;\n          padding: 20rpx;\n          font-size: 28rpx;\n          background: #f6f6f6;\n          color: #666;\n          border-radius: 10rpx;\n          margin: 20rpx 0;\n          line-height: 1.6rem;\n        }\n      }\n    }\n  }\n\n  .scorePopup {\n    background: #fff;\n    padding: 30rpx;\n    border-radius: 30rpx;\n    width: 70vw;\n    .popHeader {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      padding: 20rpx 0;\n      .title {\n        font-size: 26rpx;\n        color: $text-font-color-2;\n      }\n      .close {\n        padding: 10rpx;\n      }\n    }\n    .content {\n      padding: 30rpx 0;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      .scoreText {\n        font-size: 32rpx;\n        color: #ffca3e;\n        padding-left: 10rpx;\n        width: 80rpx;\n        line-height: 1em;\n        text-align: right;\n      }\n    }\n    .footer {\n      padding: 10rpx 0;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      button {\n        border-radius: 30rpx;\n      }\n    }\n  }\n}\n</style>\n","import MiniProgramPage from 'D:/extest/wallpaper-engine/pages/preview/preview.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uni","onLoad"],"mappings":";;;;;;;;;;;;;;;;;;;;AA4IA,UAAM,YAAYA,cAAAA,IAAI,IAAI;AAC1B,UAAM,YAAYA,cAAAA,IAAI,IAAI;AAC1B,UAAM,aAAaA,cAAAA,IAAI,IAAI;AAC3B,UAAM,YAAYA,cAAAA,IAAI,CAAC;AACvB,UAAM,YAAYA,cAAAA,IAAI,CAAA,CAAE;AACxB,UAAM,YAAYA,cAAAA,IAAI,IAAI;AAC1B,UAAM,eAAeA,cAAAA,IAAI,CAAC;AAE1B,UAAM,kBAAkBC,cAAAA,MAAI,eAAe,iBAAiB,KAAK,CAAA;AACjE,cAAU,QAAQ,gBAAgB,IAAI,CAAC,SAAS;AAC9C,aAAO;AAAA,QACL,GAAG;AAAA,QACH,QAAQ,KAAK,YAAY,QAAQ,eAAe,MAAM;AAAA,MAC1D;AAAA,IACA,CAAC;AACDA,kBAAA,MAAA,MAAA,OAAA,oCAAY,aAAa,eAAe;AACxCA,kBAAAA,MAAA,MAAA,OAAA,oCAAY,YAAY,UAAU,KAAK;AAEvCC,kBAAM,OAAC,CAAC,MAAM;AAGZ,gBAAU,QAAQ,EAAE,MAAM;AAC1B,mBAAa,QAAQ,UAAU,MAAM,UAAU,CAAC,SAAS;AACvD,eAAO,KAAK,QAAQ,UAAU;AAAA,MAClC,CAAG;AAAA,IACH,CAAC;AAGD,UAAM,YAAY,MAAM;AACtB,gBAAU,MAAM;IAClB;AAGA,UAAM,iBAAiB,MAAM;AAC3B,gBAAU,MAAM;IAClB;AAGA,UAAM,aAAa,MAAM;AACvB,iBAAW,MAAM;IACnB;AAEA,UAAM,kBAAkB,MAAM;AAC5B,iBAAW,MAAM;IACnB;AAGA,UAAM,cAAc,MAAM;AACxBD,0BAAA,MAAA,OAAA,oCAAY,SAAS,UAAU,KAAK,EAAE;AAAA,IACxC;AAGA,UAAM,aAAa,MAAM;AACvB,gBAAU,QAAQ,CAAC,UAAU;AAAA,IAC/B;AAGA,UAAM,SAAS,MAAM;AACnBA,oBAAG,MAAC,aAAY;AAAA,IAClB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtMA,GAAG,WAAW,eAAe;"}